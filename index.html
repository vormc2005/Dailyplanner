<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

   
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="style.css">
    <script type = "text/JavaScript" src = "https://MomentJS.com/downloads/moment.js"></script>
    
    <title>Document</title>
    
</head>
<body>


    <!-- Create Jumbotron header -->
    <div class="jumbotron jumbotron-fluid">
        <div class="container">
          <h1 class="display-4">Work Day Scheduler</h1>
          <p class="lead">Please type your schedule in text fields</p>
        </div>
      </div>

      <!-- Create container with dayly notes -->

      <div id="clock" class="currentTime">...</div>

    <div class="container" id="calendar"></div>
   
    
<!-- ----------------------------------- -->
      <!-- Javascript and jquery -->
      
    <script type="text/javascript">
// ----------time now function--------------------//


            let rendertime = function(){
                var timeNow = new Date();
                timeNow.addClass
                var hour = timeNow.getHours();
                var minutes = timeNow.getMinutes();
                var seconds = timeNow.getSeconds();
            
                var time = ((hour>12)?hour-12 : hour)
                time+= ((minutes<10)?":0":":"+minutes)
                time+=(hour>=12)?"PM":"AM"
            
                console.log(time)
      

               document.getElementById("clock").innerText= time;
               document.getElementById("clock").textContent=time;
            }

            rendertime();

           
/// --------------------------------------------------------////
               

        $(document).ready(function () {
            
            
            var timearr = ["9AM", "10AM","11AM","12PM","1PM","2PM","3PM","4PM","5PM"];              

            

            var buildCalendar = function(){
                $.each(timearr, function(index,value){
                    // create row
                    var row = $("<div>").addClass("row");

                    // Create columns
                    var timeCol = $("<div>");
                    timeCol.addClass("col-2 timeslot").text(value);

                    var textCol = $("<div>");
                    textCol.addClass("col-8 textarea");
                    var txtarea = $("<textarea>");
                    txtarea.addClass("form-control");
                    txtarea.attr("data-time", value);
                    txtarea.attr("id", value);
                    // TODO: Populate texarea with whatever is in local storage
                   
                    
                    textCol.append(txtarea);

                    var saveCol = $("<div>");
                    saveCol.addClass("col-2 savebtn");
                    var savebtn = $("<button>");
                    savebtn.addClass("btn btn-primary save-item");
                    savebtn.text("Save");
                    savebtn.attr("data-time", value);
                    saveCol.append(savebtn);

                    row.append(timeCol);
                    row.append(textCol);
                    row.append(saveCol);

                    $("#calendar").append(row);
                });
            }
// ===============save item??????????????=============///
            var saveItem = function(timeSlot){
                // TODO: Get the textarea value for whatever timeslot is being saved
                console.log(timeSlot);
               var savetext = document.getElementById(timeSlot).value;
            //    var savetext = document.querySelector("data-time" + timeSlot).value;
                console.log(savetext);

               localStorage.setItem(timeSlot, JSON.stringify(savetext));

               console.log(localStorage);
// =====================================================
            }

            $("#calendar").on("click", ".save-item", function(e){
                e.preventDefault();
                console.log("save: " + $(this).attr("data-time"));
                saveItem($(this).attr("data-time"));
                
            });

            
            var colors = function(){
                
            }
            
            // Build the calendar
           
            buildCalendar();

        });

        
    </script>

</body>
</html>